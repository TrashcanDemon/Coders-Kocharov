TARGET = dec_dyn_lib
CFLAGS = -c -fPIC -std=c99 -Wall

all: decoder

decoder: decoder.o dec_dyn_lib.so
	gcc -std=c99 -Wall -shared -o decoder decoder.o dec_dyn_lib.so

decoder.o: decoder.c
	gcc $(CFLAGS) decoder.c

dec_dyn_lib.so: m_upperlower.o m_strip.o m_caesar.o m_xor.o
	gcc -shared -o dec_dyn_lib.so m_upperlower.o m_strip.o m_caesar.o m_xor.o

m_upperlower.o: m_upperlower.c
	gcc $(CFLAGS) m_upperlower.c

m_strip.o: m_strip.c
	gcc $(CFLAGS) m_strip.c

m_caesar.o: m_caesar.c
	gcc $(CFLAGS) m_caesar.c

m_xor.o: m_xor.c
	gcc $(CFLAGS) m_xor.c

clean:
	rm -rf *.o decoder
	rm -rf *.so decoder